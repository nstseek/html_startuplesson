(window.webpackJsonpredux_thunk_react=window.webpackJsonpredux_thunk_react||[]).push([[0],{17:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},23:function(e,t,a){e.exports=a(35)},28:function(e,t,a){},30:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var r,n=a(0),s=a.n(n),c=a(5),i=a.n(c),o=(a(28),a(8)),l=a.n(o),u=a(13),d=a(3),p=a(14),m=a(15),g=a(21),E=a(16),S=a(22),f=a(17),y=a.n(f),h=(a(30),a(6));!function(e){e.SAVE_MESSAGE="messages/SAVE_MESSAGE",e.CLEAR_MESSAGES="messages/CLEAR_MESSAGES",e.GET_ADDRESS_PENDING="messages/GET_ADDRESS_PENDING",e.GET_ADDRESS_SUCCESS="messages/GET_ADDRESS_SUCCESS",e.GET_ADDRESS_FAILED="messages/GET_ADDRESS_FAILED"}(r||(r={}));var v=r;function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(a,!0).forEach((function(t){Object(d.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var O,A={messages:{}},_={addresses:{}};function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(a,!0).forEach((function(t){Object(d.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}!function(e){e[e.message=0]="message",e[e.user=1]="user",e[e.cep=2]="cep",e[e.image=3]="image"}(O||(O={}));var R=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(g.a)(this,Object(E.a)(t).call(this,e))).fileReader=new FileReader,a.parseAddress=function(e,t){var r=a.props.addressStore.addresses[t].address;return e.cep?s.a.createElement("div",{key:"".concat(t," address"),className:"address-data"},s.a.createElement("span",{className:"address-text",key:"".concat(t," street")},"".concat(r.logradouro,", ").concat(r.bairro)),s.a.createElement("span",{className:"address-text",key:"".concat(t," state")},"".concat(r.localidade," - ").concat(r.uf)),s.a.createElement("span",{className:"address-text",key:"".concat(t," country")},"Brasil")):s.a.createElement("span",{className:"address-data"},e.errorMsg)},a.saveUser=function(){var e;(a.state.image||a.state.imgSrc)&&(e=a.state.image?a.state.image:a.state.imgSrc,a.props.saveMessage(a.state.user,a.state.message,e),a.props.getAddress(a.state.user,a.state.cep))},a.updateInput=function(e,t){switch(t){case O.user:return void a.setState((function(t){return w({},t,{user:e})}));case O.message:return void a.setState((function(t){return w({},t,{message:e})}));case O.cep:return void a.setState((function(t){return w({},t,{cep:e})}));case O.image:return void a.setState((function(t){return w({},t,{image:e})}));default:return}},a.state={message:"",user:"",cep:"",image:"",imgSrc:"",imgSrcSelec:""},a}return Object(S.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=Object.keys(this.props.messagesStore.messages).map((function(t){return s.a.createElement("li",{className:"list-item",key:"".concat(t," list container")},s.a.createElement("div",{className:"item-container",key:"".concat(t," container")},s.a.createElement("img",{alt:"".concat(t," profile pic"),key:"".concat(t," profile pic"),src:e.props.messagesStore.messages[t].image,className:"profile-pic"}),s.a.createElement("div",{key:"".concat(t," data"),className:"user-data"},s.a.createElement("span",{className:"user-text",key:"".concat(t," username}")},t),s.a.createElement("span",{className:"user-text status",key:"".concat(t," status")},e.props.messagesStore.messages[t].message)),e.parseAddress(e.props.addressStore.addresses[t].address,t)))}));return s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header"},s.a.createElement("img",{src:y.a,className:"App-logo",alt:"logo"}),s.a.createElement("h3",null,"Sistema de status e endereco usando Redux, Redux-Thunk e TypeScript"),s.a.createElement("div",null,s.a.createElement("span",{style:{margin:20}},"Digite seu usu\xe1rio"),s.a.createElement("input",{placeholder:"Digite um usu\xe1rio...",type:"text",value:this.state.user,onChange:function(t){return e.updateInput(t.target.value,O.user)}})),s.a.createElement("div",null,s.a.createElement("span",{style:{margin:20}},"Digite uma mensagem"),s.a.createElement("input",{placeholder:"Digite sua mensagem...",type:"text",value:this.state.message,onChange:function(t){return e.updateInput(t.target.value,O.message)}})),s.a.createElement("div",null,s.a.createElement("span",{style:{margin:20}},"Digite uma URI para sua foto de perfil"),s.a.createElement("input",{placeholder:"Digite a URI...",type:"text",value:this.state.image,disabled:this.state.imgSrc,onChange:function(t){return e.updateInput(t.target.value,O.image)}}),s.a.createElement("span",{style:{margin:20}},"or send a photo"),s.a.createElement("input",{placeholder:"Envie sua foto...",type:"file",value:this.state.imgSrcSelec,disabled:!!this.state.image,onChange:function(){var t=Object(u.a)(l.a.mark((function t(a){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=a.target,e.fileReader.readAsDataURL(r.files[0]),e.setState((function(e){return w({},e,{imgSrcSelec:r.value})})),e.fileReader.addEventListener("loadend",(function(){return e.setState((function(t){return w({},t,{imgSrc:e.fileReader.result})}))}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),s.a.createElement("button",{onClick:function(){return e.setState((function(e){return w({},e,{imgSrc:"",imgSrcSelec:""})}))}},"Clear selection"),this.state.imgSrc&&!this.state.image?s.a.createElement("img",{style:{width:128,height:128},src:this.state.imgSrc,alt:"pic sent"}):""),s.a.createElement("div",null,s.a.createElement("span",{style:{margin:20}},"Digite seu cep"),s.a.createElement("input",{placeholder:"Digite seu cep...",type:"text",value:this.state.cep,onChange:function(t){return e.updateInput(t.target.value,O.cep)}})),s.a.createElement("div",null,s.a.createElement("button",{style:{margin:20},onClick:this.saveUser},"Send"),s.a.createElement("button",{style:{margin:20},onClick:this.props.clearMessages},"Clear store")),s.a.createElement("ul",null,t)))}}]),t}(s.a.Component),k=Object(h.b)((function(e){return{messagesStore:e.messagesReducer,addressStore:e.addressReducer}}),(function(e){return{saveMessage:function(t,a,r){return e(function(e,t,a){return{type:v.SAVE_MESSAGE,payload:{user:e,message:t,image:a}}}(t,a,r))},clearMessages:function(){return e({type:v.CLEAR_MESSAGES,payload:null})},getAddress:function(t,a){return function(e,t,a){e({type:v.GET_ADDRESS_PENDING,payload:{cep:null,logradouro:null,complemento:null,bairro:null,localidade:null,uf:null,unidade:null,ibge:null,gia:null,user:t,errorMsg:"Loading..."}}),fetch("https://viacep.com.br/ws/".concat(a,"/json/")).then((function(e){return e.json()})).then((function(a){e({type:v.GET_ADDRESS_SUCCESS,payload:Object.assign(a,{user:t})})})).catch((function(){e({type:v.GET_ADDRESS_FAILED,payload:{cep:null,logradouro:null,complemento:null,bairro:null,localidade:null,uf:null,unidade:null,ibge:null,gia:null,user:t,errorMsg:"Failed to fetch address"}})}))}(e,t,a)}}}))(R);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var G=a(4),C=a(19),N=a(20),P=a.n(N),x=G.c({messagesReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.SAVE_MESSAGE:return{messages:D({},e.messages,Object(d.a)({},t.payload.user,{message:t.payload.message,image:t.payload.image}))};case v.CLEAR_MESSAGES:return A;default:return e}},addressReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.GET_ADDRESS_PENDING:case v.GET_ADDRESS_SUCCESS:case v.GET_ADDRESS_FAILED:return{addresses:D({},e.addresses,Object(d.a)({},t.payload.user,{address:t.payload}))};default:return e}}}),I=G.d(x,G.a(C.a,P.a)),M=s.a.createElement(h.a,{store:I},s.a.createElement(k,null));i.a.render(M,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[23,1,2]]]);
//# sourceMappingURL=main.7efebc79.chunk.js.map